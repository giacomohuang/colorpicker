!function(e,l){"object"==typeof exports&&"undefined"!=typeof module?module.exports=l(require("vue")):"function"==typeof define&&define.amd?define(["vue"],l):(e="undefined"!=typeof globalThis?globalThis:e||self).ColorPicker=l(e.Vue)}(this,(function(e){"use strict";const l={hsb2rgb(e){var l={},t=Math.round(e.h),a=Math.round(255*e.s/100),o=Math.round(255*e.b/100);if(0==a)l.r=l.g=l.b=o;else{var r=o,n=(255-a)*o/255,i=t%60*(r-n)/60;360==t&&(t=0),t<60?(l.r=r,l.b=n,l.g=n+i):t<120?(l.g=r,l.b=n,l.r=r-i):t<180?(l.g=r,l.r=n,l.b=n+i):t<240?(l.b=r,l.r=n,l.g=r-i):t<300?(l.b=r,l.g=n,l.r=n+i):t<360?(l.r=r,l.g=n,l.b=r-i):(l.r=0,l.g=0,l.b=0)}return{r:Math.round(l.r),g:Math.round(l.g),b:Math.round(l.b),a:e.a}},hsba2rgba(e){const l=this.hsb2rgb(e);return`rgba(${l.r},${l.g},${l.b},${l.a})`},rgba2hex(e){const l=e=>{const l=e.toString(16);return l.length<2?"0"+l:l},t=e.a>=0?Math.round(255*e.a):0;let a="";return 255!==t&&(a=l(t)),"#"+l(e.r)+l(e.g)+l(e.b)+a},hex2rgba(e){const l=9===e.length;return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:l?+(parseInt(e.slice(7,9),16)/255).toFixed(2):1}},hex2hsb(e){const l=this.hex2rgba(e);return l.a=1,this.rgba2hsba(l)},rgba2hsba(e){var l={h:0,s:0,b:0,a:e.a},t=Math.min(e.r,e.g,e.b),a=Math.max(e.r,e.g,e.b),o=a-t;return l.b=a,l.s=0!=a?255*o/a:0,0!=l.s?e.r==a?l.h=(e.g-e.b)/o:e.g==a?l.h=2+(e.b-e.r)/o:l.h=4+(e.r-e.g)/o:l.h=-1,l.h*=60,l.h<0&&(l.h+=360),l.s*=100/255,l.b*=100/255,l.h=Math.round(l.h),l.s=Math.round(l.s),l.b=Math.round(l.b),l}},t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAAAM0lEQVQ4EWM8cuTIfwY8wMbGhhGPNAMTPkli5EYNYBgEgYg3jkHRSCidjEbjYIhGimMBAKIWB2rXs92IAAAAAElFTkSuQmCC",a=["onClick","onMousedown"],o={style:{"font-size":"10px",width:"32px","padding-left":"8px","user-select":"none"}},r={class:"palette-wrapper"},n={class:"huebar-wrapper"},i={class:"bar-wrapper"},s={class:"preview-wrapper"},c={name:"vue-colorpicker"},u=((e,l)=>{const t=e.__vccOpts||e;for(const[a,o]of l)t[a]=o;return t})(Object.assign(c,{props:{modelValue:{type:Object},size:{type:String,required:!1,default:"medium"},modebar:{type:String,required:!1,default:"show"}},emits:["update:modelValue","colorChanged"],setup(c,{emit:u}){var d,v,p,h;const f=c,b=u,g=e.ref(null),m=e.ref(null),A=e.ref(null),y=e.ref(null),M=e.ref(null),E=e.ref(null),k=e.ref(null),w=e.ref(null),x=e.ref(null),V=e.ref(null),N=e.ref(null),C=e.ref(!1),$=e.ref(0),B=e.ref(""),S=e.ref(""),z=e.ref(""),L=e.ref(!0),_=e.reactive(l.rgba2hsba((null==(d=f.modelValue)?void 0:d.color)||{r:0,g:0,b:0,a:1})),T=e.ref((null==(v=f.modelValue)?void 0:v.degree)||90);T.value=T.value<0?0:T.value;const I=e.ref(f.modebar);["none","show"].includes(I.value)||(I.value="show");const P=e.ref((null==(p=f.modelValue)?void 0:p.mode)||"solid");["solid","linear","radial"].includes(P.value)||(P.value="solid"),"none"==I.value&&(P.value="solid");const Y=e.ref((null==(h=f.modelValue)?void 0:h.color)||[{percent:0,color:{r:255,g:255,b:255,a:1}},{percent:100,color:{r:0,g:0,b:0,a:1}}]),Q=e.ref([]);Y.value.forEach(((e,t)=>{Q.value.push({id:t,percent:e.percent,color:l.rgba2hsba(e.color)})}));let X=!1,j=138,D=0,G=null;function O(e){if(P.value=e,"solid"!==P.value){Q.value.forEach(((e,l)=>{x.value.children[l].style.left=Math.round(1.41*e.percent-3)+"px"})),function(){const e=10,l=4;let t=T.value;t-360<0&&(t-=360);const a=-(t-90)*(Math.PI/180);N.value.style.left=Math.cos(a)*e+l+1+"px",N.value.style.top=-Math.sin(a)*e+l+1+"px"}();const e=Q.value[$.value].color;_.h=e.h,_.s=e.s,_.b=e.b,_.a=e.a}re(),Z(),ee()}async function R(){if(!G)return!1;G.open().then((e=>{const t=l.hex2hsb(e.sRGBHex);_.h=t.h,_.s=t.s,_.b=t.b,_.a=t.a,re()})).catch((e=>{}))}function K(){return!1}function F(l){27==l.keyCode?C.value=!1:32!=l.keyCode&&8!=l.keyCode||Q.value.length>2&&(Q.value.splice($.value,1),$.value=Q.value.length-1,e.nextTick((()=>ee())))}function q(e){let l=e.getBoundingClientRect(),t=e.ownerDocument,a=t.body,o=t.documentElement,r=o.clientTop||a.clientTop||0,n=o.clientLeft||a.clientLeft||0;return{top:l.top+(self.scrollY||o.scrollTop||a.scrollTop)-r,left:l.left+(self.scrollX||o.scrollLeft||a.scrollLeft)-n}}function H(){let e=0,l=0,t=window.event;return t.pageX?(e=t.pageX,l=t.pageY):(e=t.clientX+document.body.scrollLeft-document.body.clientLeft,l=t.clientY+document.body.scrollTop-document.body.clientTop),{x:e,y:l}}function U(e){var l=e.target;if(X)return X=!1,!1;m.value.contains(l)||g.value.contains(l)||(C.value=!1)}function W(e,l,t){function a(){X=!0,l(e,t)}document.addEventListener("mousemove",a,!1),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",e)}),!1)}function J(e,l){const t=q(x.value),a=H();let o=Math.max(-3,Math.min(138,a.x-t.left-6));e.style.left=o+"px",Q.value[l].percent=Math.round((o+3)/141*100),$.value=l;const r=Q.value[l].color;_.h=r.h,_.s=r.s,_.b=r.b,_.a=r.a,re(),Z(),ee()}function Z(){"solid"!==P.value&&(Q.value[$.value].color.a=_.a,Q.value[$.value].color.h=_.h,Q.value[$.value].color.s=_.s,Q.value[$.value].color.b=_.b)}function ee(){const e=l.hsb2rgb(_);B.value=`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`,S.value=B.value;let a="",o="",r=[...Q.value],n=[];r.sort(((e,l)=>e.percent-l.percent)),r.forEach((e=>{a+=","+l.hsba2rgba(e.color)+" "+e.percent+"%",n.push({percent:e.percent,color:l.hsb2rgb(e.color)})}));const i={};switch(i.mode=P.value,P.value){case"solid":i.color=l.hsb2rgb(_),i.hex=l.rgba2hex(i.color);break;case"linear":z.value=`linear-gradient(to right,${a.slice(1)}),url('${t}')`,S.value=`linear-gradient(${T.value}deg${a}),url('${t}')`,o=`background-image:linear-gradient(${T.value}deg${a})`,i.degree=T.value,i.color=n,i.css=o;break;case"radial":z.value=`linear-gradient(to right,${a.slice(1)}),url('${t}')`,S.value=`radial-gradient(${a.slice(1)}),url('${t}')`,o=`background-image:radial-gradient(${a.slice(1)})`,i.color=n,i.css=o}b("update:modelValue",i),b("colorChanged",i)}function le(){const e=q(V.value),l=H(),t=Math.atan2(e.top+10-l.y,l.x-e.left-10);N.value.style.left=10*Math.cos(t)+4+1+"px",N.value.style.top=10*-Math.sin(t)+4+1+"px";let a=90-Math.floor(180*t/Math.PI);a<0&&(a+=360),T.value=a,Z(),ee()}function te(){const e=q(A.value),l=H(),t=Math.max(-6,Math.min(l.x-e.left-6,210)),a=Math.max(-6,Math.min(l.y-e.top-6,132));y.value.style.left=t+"px",y.value.style.top=a+"px",_.s=Math.round(100*(t+6)/216),_.b=Math.round(100*(j-a-6)/j)}function ae(){const e=q(k.value),t=H(),a=Math.max(-3,Math.min(t.x-e.left-6,138));M.value.style.left=a+"px",_.h=Math.round(360*(a+3)/141);const o=l.hsb2rgb({h:_.h,s:100,b:100,a:_.a});A.value.style.background=`rgb(${o.r},${o.g},${o.b},1)`}function oe(){const e=q(w.value),l=H(),t=Math.max(-3,Math.min(138,l.x-e.left-6));E.value.style.left=t+"px",_.a=((t+3)/141).toFixed(2)}function re(){const e=l.hsb2rgb({h:_.h,s:100,b:100,a:_.a});A.value.style.background=`rgb(${e.r},${e.g},${e.b},1)`,y.value.style.left=2.16*_.s-6+"px",y.value.style.top=j-1.38*_.b-6+"px",M.value.style.left=141/360*_.h-3+"px",E.value.style.left=141*_.a-3+"px"}return"EyeDropper"in window?G=new EyeDropper:L.value=!1,e.onMounted((()=>{O(P.value)})),e.watch(_,(()=>{Z(),ee()})),e.watch(C,(()=>{C.value?(document.addEventListener("click",U,!0),document.addEventListener("keyup",F,!1)):(document.removeEventListener("click",U,!0),document.removeEventListener("keyup",F,!1))})),(l,t)=>(e.openBlock(),e.createElementBlock("div",{onSelectstart:t[13]||(t[13]=e.withModifiers((()=>{}),["prevent"])),style:{position:"relative"}},[e.createElementVNode("div",{class:e.normalizeClass(["cbtn",[f.size,{active:C.value}]]),onClick:t[0]||(t[0]=e.withModifiers((e=>C.value=!C.value),["stop"])),ref_key:"cbtnEl",ref:g},[e.createElementVNode("div",{class:"cbtn-inner",style:e.normalizeStyle({background:S.value})},null,4)],2),e.withDirectives(e.createElementVNode("div",{class:"panel",ref_key:"panelEl",ref:m,onContextmenu:e.withModifiers(K,["prevent"])},[e.createElementVNode("div",{class:"active-mode-wrapper",style:e.normalizeStyle({display:I.value})},[e.createElementVNode("div",{title:"solid",class:e.normalizeClass(["btn-active-mode solid",{gray:"solid"===P.value}]),onClick:t[1]||(t[1]=e.withModifiers((e=>O("solid")),["stop"]))},null,2),e.createElementVNode("div",{title:"linear",class:e.normalizeClass(["btn-active-mode linear",{gray:"linear"===P.value}]),onClick:t[2]||(t[2]=e.withModifiers((e=>O("linear")),["stop"]))},null,2),e.createElementVNode("div",{title:"radial",class:e.normalizeClass(["btn-active-mode radial",{gray:"radial"===P.value}]),onClick:t[3]||(t[3]=e.withModifiers((e=>O("radial")),["stop"]))},null,2)],4),e.createElementVNode("div",{class:"grad-wrapper",style:e.normalizeStyle("solid"===P.value?"display:none":"")},[e.createElementVNode("div",{class:"grad-bar",ref_key:"gradBarEl",ref:x,style:e.normalizeStyle({backgroundImage:z.value}),onClick:t[4]||(t[4]=e.withModifiers((l=>function(){if(Q.value.length<10){const l=JSON.parse(JSON.stringify(Q.value[$.value]));l.id=D++,Q.value.push(l),$.value=Q.value.length-1,e.nextTick((()=>J(x.value.children[$.value],$.value)))}}()),["stop"]))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Q.value,((l,t)=>(e.openBlock(),e.createElementBlock("div",{key:l.id,style:{top:"-1px"},class:e.normalizeClass(["picker",t==$.value?"on":""]),onClick:e.withModifiers((e=>J(e.target,t)),["stop"]),onMousedown:e.withModifiers((e=>W(e.target,J,t)),["stop"])},null,42,a)))),128))],4),e.createElementVNode("div",{class:"flex-row",style:e.normalizeStyle("linear"===P.value?"":"visibility:hidden")},[e.createElementVNode("div",{class:"degree",ref_key:"degreeEl",ref:V,onClick:e.withModifiers(le,["stop"]),onMousedown:t[6]||(t[6]=e.withModifiers((e=>W(e,le)),["stop"]))},[e.createElementVNode("div",{class:"picker-deg",ref_key:"degreePickerEl",ref:N,onMousedown:t[5]||(t[5]=e.withModifiers((e=>W(e,le)),["stop"]))},null,544)],544),e.createElementVNode("div",o,e.toDisplayString(T.value)+"°",1)],4)],4),e.createElementVNode("div",r,[e.createElementVNode("div",{class:"palette",ref_key:"paletteEl",ref:A,onClick:e.withModifiers(te,["stop"]),onMousedown:t[8]||(t[8]=e.withModifiers((e=>W(e,te)),["stop"]))},[t[14]||(t[14]=e.createElementVNode("div",{class:"white"},null,-1)),t[15]||(t[15]=e.createElementVNode("div",{class:"black"},null,-1)),e.createElementVNode("div",{class:"picker",ref_key:"palettePickerEl",ref:y,onMousedown:t[7]||(t[7]=e.withModifiers((e=>W(e,te)),["stop"]))},null,544)],544)]),e.createElementVNode("div",n,[e.createElementVNode("div",{class:"dropper",onClick:R,style:e.normalizeStyle([{cursor:"pointer"},L.value?"":"opacity: 50%;cursor:default"])},null,4),e.createElementVNode("div",i,[e.createElementVNode("div",{class:"hue-bar",ref_key:"hueBarEl",ref:k,onClick:e.withModifiers(ae,["stop"]),onMousedown:t[10]||(t[10]=e.withModifiers((e=>W(e,ae)),["stop"]))},[e.createElementVNode("div",{class:"picker",ref_key:"huePickerEl",ref:M,style:{top:"-1px"},onMousedown:t[9]||(t[9]=e.withModifiers((e=>W(e,ae)),["stop"]))},null,544)],544),e.createElementVNode("div",{class:"opacity-bar",ref_key:"opactiyBarEl",ref:w,onClick:e.withModifiers(oe,["stop"]),onMousedown:t[12]||(t[12]=e.withModifiers((e=>W(e,oe)),["stop"]))},[e.createElementVNode("div",{class:"picker",ref_key:"opacityPickerEl",ref:E,style:{top:"-1px"},onClick:e.withModifiers(oe,["stop"]),onMousedown:t[11]||(t[11]=e.withModifiers((e=>W(e,oe)),["stop"]))},null,544)],544)]),e.createElementVNode("div",s,[e.createElementVNode("div",{class:"preview-color",style:e.normalizeStyle({background:B.value})},null,4)])])],544),[[e.vShow,C.value]])],32))}}),[["__scopeId","data-v-59360534"]]);return u.install=function(e){e.component("ColorPicker",u)},u}));
