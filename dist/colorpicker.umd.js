!function(e,l){"object"==typeof exports&&"undefined"!=typeof module?module.exports=l(require("vue")):"function"==typeof define&&define.amd?define(["vue"],l):(e="undefined"!=typeof globalThis?globalThis:e||self).ColorPicker=l(e.Vue)}(this,(function(e){"use strict";const l={hsb2rgb(e){var l={},t=Math.round(e.h),a=Math.round(255*e.s/100),o=Math.round(255*e.b/100);if(0==a)l.r=l.g=l.b=o;else{var r=o,n=(255-a)*o/255,i=t%60*(r-n)/60;360==t&&(t=0),t<60?(l.r=r,l.b=n,l.g=n+i):t<120?(l.g=r,l.b=n,l.r=r-i):t<180?(l.g=r,l.r=n,l.b=n+i):t<240?(l.b=r,l.r=n,l.g=r-i):t<300?(l.b=r,l.g=n,l.r=n+i):t<360?(l.r=r,l.g=n,l.b=r-i):(l.r=0,l.g=0,l.b=0)}return{r:Math.round(l.r),g:Math.round(l.g),b:Math.round(l.b),a:e.a}},hsba2rgba(e){const l=this.hsb2rgb(e);return`rgba(${l.r},${l.g},${l.b},${l.a})`},rgba2hex(e){const l=e=>{const l=e.toString(16);return l.length<2?"0"+l:l},t=e.a>=0?Math.round(255*e.a):0;let a="";return 255!==t&&(a=l(t)),"#"+l(e.r)+l(e.g)+l(e.b)+a},hex2rgba(e){const l=9===e.length;return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:l?+(parseInt(e.slice(7,9),16)/255).toFixed(2):1}},hex2hsb(e){const l=this.hex2rgba(e);return l.a=1,this.rgba2hsba(l)},rgba2hsba(e){var l={h:0,s:0,b:0,a:e.a},t=Math.min(e.r,e.g,e.b),a=Math.max(e.r,e.g,e.b),o=a-t;return l.b=a,l.s=0!=a?255*o/a:0,0!=l.s?e.r==a?l.h=(e.g-e.b)/o:e.g==a?l.h=2+(e.b-e.r)/o:l.h=4+(e.r-e.g)/o:l.h=-1,l.h*=60,l.h<0&&(l.h+=360),l.s*=100/255,l.b*=100/255,l.h=Math.round(l.h),l.s=Math.round(l.s),l.b=Math.round(l.b),l}},t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAAAM0lEQVQ4EWM8cuTIfwY8wMbGhhGPNAMTPkli5EYNYBgEgYg3jkHRSCidjEbjYIhGimMBAKIWB2rXs92IAAAAAElFTkSuQmCC",a={onselectstart:"return false",style:{position:"relative"}},o=["onClick","onMousedown"],r={style:{"font-size":"10px",width:"32px","padding-left":"8px","user-select":"none"}},n={class:"palette-wrapper"},i={class:"huebar-wrapper"},s={class:"bar-wrapper"},c={class:"preview-wrapper"},u={name:"vue-colorpicker"},d=((e,l)=>{const t=e.__vccOpts||e;for(const[a,o]of l)t[a]=o;return t})(Object.assign(u,{props:{modelValue:{type:Object},size:{type:String,required:!1,default:"medium"},modebar:{type:String,required:!1,default:"show"}},emits:["update:modelValue","colorChanged"],setup(u,{emit:d}){var v,p,h,f;const b=u,g=d,m=e.ref(null),A=e.ref(null),y=e.ref(null),M=e.ref(null),E=e.ref(null),k=e.ref(null),w=e.ref(null),x=e.ref(null),V=e.ref(null),N=e.ref(null),C=e.ref(null),$=e.ref(!1),B=e.ref(0),S=e.ref(""),z=e.ref(""),L=e.ref(""),_=e.ref(!0),T=e.reactive(l.rgba2hsba((null==(v=b.modelValue)?void 0:v.color)||{r:0,g:0,b:0,a:1})),I=e.ref((null==(p=b.modelValue)?void 0:p.degree)||90);I.value=I.value<0?0:I.value;const P=e.ref(b.modebar);["none","show"].includes(P.value)||(P.value="show");const Y=e.ref((null==(h=b.modelValue)?void 0:h.mode)||"solid");["solid","linear","radial"].includes(Y.value)||(Y.value="solid"),"none"==P.value&&(Y.value="solid");const Q=e.ref((null==(f=b.modelValue)?void 0:f.color)||[{percent:0,color:{r:255,g:255,b:255,a:1}},{percent:100,color:{r:0,g:0,b:0,a:1}}]),X=e.ref([]);Q.value.forEach(((e,t)=>{X.value.push({id:t,percent:e.percent,color:l.rgba2hsba(e.color)})}));let j=!1,D=138,G=0,O=null;function R(e){if(Y.value=e,"solid"!==Y.value){X.value.forEach(((e,l)=>{V.value.children[l].style.left=Math.round(1.41*e.percent-3)+"px"})),function(){const e=10,l=4;let t=I.value;t-360<0&&(t-=360);const a=-(t-90)*(Math.PI/180);C.value.style.left=Math.cos(a)*e+l+1+"px",C.value.style.top=-Math.sin(a)*e+l+1+"px"}();const e=X.value[B.value].color;T.h=e.h,T.s=e.s,T.b=e.b,T.a=e.a}ne(),ee(),le()}async function K(){if(!O)return!1;O.open().then((e=>{const t=l.hex2hsb(e.sRGBHex);T.h=t.h,T.s=t.s,T.b=t.b,T.a=t.a,ne()})).catch((e=>{}))}function F(){return!1}function q(l){27==l.keyCode?$.value=!1:32!=l.keyCode&&8!=l.keyCode||X.value.length>2&&(X.value.splice(B.value,1),B.value=X.value.length-1,e.nextTick((()=>le())))}function H(e){let l=e.getBoundingClientRect(),t=e.ownerDocument,a=t.body,o=t.documentElement,r=o.clientTop||a.clientTop||0,n=o.clientLeft||a.clientLeft||0;return{top:l.top+(self.scrollY||o.scrollTop||a.scrollTop)-r,left:l.left+(self.scrollX||o.scrollLeft||a.scrollLeft)-n}}function U(){let e=0,l=0,t=window.event;return t.pageX?(e=t.pageX,l=t.pageY):(e=t.clientX+document.body.scrollLeft-document.body.clientLeft,l=t.clientY+document.body.scrollTop-document.body.clientTop),{x:e,y:l}}function W(e){var l=e.target;if(j)return j=!1,!1;A.value.contains(l)||m.value.contains(l)||($.value=!1)}function J(e,l,t){function a(){j=!0,l(e,t)}document.addEventListener("mousemove",a,!1),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",e)}),!1)}function Z(e,l){const t=H(V.value),a=U();let o=Math.max(-3,Math.min(138,a.x-t.left-6));e.style.left=o+"px",X.value[l].percent=Math.round((o+3)/141*100),B.value=l;const r=X.value[l].color;T.h=r.h,T.s=r.s,T.b=r.b,T.a=r.a,ne(),ee(),le()}function ee(){"solid"!==Y.value&&(X.value[B.value].color.a=T.a,X.value[B.value].color.h=T.h,X.value[B.value].color.s=T.s,X.value[B.value].color.b=T.b)}function le(){const e=l.hsb2rgb(T);S.value=`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`,z.value=S.value;let a="",o="",r=[...X.value],n=[];r.sort(((e,l)=>e.percent-l.percent)),r.forEach((e=>{a+=","+l.hsba2rgba(e.color)+" "+e.percent+"%",n.push({percent:e.percent,color:l.hsb2rgb(e.color)})}));const i={};switch(i.mode=Y.value,Y.value){case"solid":i.color=l.hsb2rgb(T),i.hex=l.rgba2hex(i.color);break;case"linear":L.value=`linear-gradient(to right,${a.slice(1)}),url('${t}')`,z.value=`linear-gradient(${I.value}deg${a}),url('${t}')`,o=`background-image:linear-gradient(${I.value}deg${a})`,i.degree=I.value,i.color=n,i.css=o;break;case"radial":L.value=`linear-gradient(to right,${a.slice(1)}),url('${t}')`,z.value=`radial-gradient(${a.slice(1)}),url('${t}')`,o=`background-image:radial-gradient(${a.slice(1)})`,i.color=n,i.css=o}g("update:modelValue",i),g("colorChanged",i)}function te(){const e=H(N.value),l=U(),t=Math.atan2(e.top+10-l.y,l.x-e.left-10);C.value.style.left=10*Math.cos(t)+4+1+"px",C.value.style.top=10*-Math.sin(t)+4+1+"px";let a=90-Math.floor(180*t/Math.PI);a<0&&(a+=360),I.value=a,ee(),le()}function ae(){const e=H(y.value),l=U(),t=Math.max(-6,Math.min(l.x-e.left-6,210)),a=Math.max(-6,Math.min(l.y-e.top-6,132));M.value.style.left=t+"px",M.value.style.top=a+"px",T.s=Math.round(100*(t+6)/216),T.b=Math.round(100*(D-a-6)/D)}function oe(){const e=H(w.value),t=U(),a=Math.max(-3,Math.min(t.x-e.left-6,138));E.value.style.left=a+"px",T.h=Math.round(360*(a+3)/141);const o=l.hsb2rgb({h:T.h,s:100,b:100,a:T.a});y.value.style.background=`rgb(${o.r},${o.g},${o.b},1)`}function re(){const e=H(x.value),l=U(),t=Math.max(-3,Math.min(138,l.x-e.left-6));k.value.style.left=t+"px",T.a=((t+3)/141).toFixed(2)}function ne(){const e=l.hsb2rgb({h:T.h,s:100,b:100,a:T.a});y.value.style.background=`rgb(${e.r},${e.g},${e.b},1)`,M.value.style.left=2.16*T.s-6+"px",M.value.style.top=D-1.38*T.b-6+"px",E.value.style.left=141/360*T.h-3+"px",k.value.style.left=141*T.a-3+"px"}return"EyeDropper"in window?O=new EyeDropper:_.value=!1,e.onMounted((()=>{R(Y.value)})),e.watch(T,(()=>{ee(),le()})),e.watch($,(()=>{$.value?(document.addEventListener("click",W,!0),document.addEventListener("keyup",q,!1)):(document.removeEventListener("click",W,!0),document.removeEventListener("keyup",q,!1))})),(l,t)=>(e.openBlock(),e.createElementBlock("div",a,[e.createElementVNode("div",{class:e.normalizeClass(["cbtn",[b.size,{active:$.value}]]),onClick:t[0]||(t[0]=e.withModifiers((e=>$.value=!$.value),["stop"])),ref_key:"cbtnEl",ref:m},[e.createElementVNode("div",{class:"cbtn-inner",style:e.normalizeStyle({background:z.value})},null,4)],2),e.withDirectives(e.createElementVNode("div",{class:"panel",ref_key:"panelEl",ref:A,onContextmenu:e.withModifiers(F,["prevent"])},[e.createElementVNode("div",{class:"active-mode-wrapper",style:e.normalizeStyle({display:P.value})},[e.createElementVNode("div",{title:"solid",class:e.normalizeClass(["btn-active-mode solid",{gray:"solid"===Y.value}]),onClick:t[1]||(t[1]=e.withModifiers((e=>R("solid")),["stop"]))},null,2),e.createElementVNode("div",{title:"linear",class:e.normalizeClass(["btn-active-mode linear",{gray:"linear"===Y.value}]),onClick:t[2]||(t[2]=e.withModifiers((e=>R("linear")),["stop"]))},null,2),e.createElementVNode("div",{title:"radial",class:e.normalizeClass(["btn-active-mode radial",{gray:"radial"===Y.value}]),onClick:t[3]||(t[3]=e.withModifiers((e=>R("radial")),["stop"]))},null,2)],4),e.createElementVNode("div",{class:"grad-wrapper",style:e.normalizeStyle("solid"===Y.value?"display:none":"")},[e.createElementVNode("div",{class:"grad-bar",ref_key:"gradBarEl",ref:V,style:e.normalizeStyle({backgroundImage:L.value}),onClick:t[4]||(t[4]=e.withModifiers((l=>function(){if(X.value.length<10){const l=JSON.parse(JSON.stringify(X.value[B.value]));l.id=G++,X.value.push(l),B.value=X.value.length-1,e.nextTick((()=>Z(V.value.children[B.value],B.value)))}}()),["stop"]))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(X.value,((l,t)=>(e.openBlock(),e.createElementBlock("div",{key:l.id,style:{top:"-1px"},class:e.normalizeClass(["picker",t==B.value?"on":""]),onClick:e.withModifiers((e=>Z(e.target,t)),["stop"]),onMousedown:e.withModifiers((e=>J(e.target,Z,t)),["stop"])},null,42,o)))),128))],4),e.createElementVNode("div",{class:"flex-row",style:e.normalizeStyle("linear"===Y.value?"":"visibility:hidden")},[e.createElementVNode("div",{class:"degree",ref_key:"degreeEl",ref:N,onClick:e.withModifiers(te,["stop"]),onMousedown:t[6]||(t[6]=e.withModifiers((e=>J(e,te)),["stop"]))},[e.createElementVNode("div",{class:"picker-deg",ref_key:"degreePickerEl",ref:C,onMousedown:t[5]||(t[5]=e.withModifiers((e=>J(e,te)),["stop"]))},null,544)],544),e.createElementVNode("div",r,e.toDisplayString(I.value)+"Â°",1)],4)],4),e.createElementVNode("div",n,[e.createElementVNode("div",{class:"palette",ref_key:"paletteEl",ref:y,onClick:e.withModifiers(ae,["stop"]),onMousedown:t[8]||(t[8]=e.withModifiers((e=>J(e,ae)),["stop"]))},[t[13]||(t[13]=e.createElementVNode("div",{class:"white"},null,-1)),t[14]||(t[14]=e.createElementVNode("div",{class:"black"},null,-1)),e.createElementVNode("div",{class:"picker",ref_key:"palettePickerEl",ref:M,onMousedown:t[7]||(t[7]=e.withModifiers((e=>J(e,ae)),["stop"]))},null,544)],544)]),e.createElementVNode("div",i,[e.createElementVNode("div",{class:"dropper",onClick:K,style:e.normalizeStyle([{cursor:"pointer"},_.value?"":"opacity: 50%;cursor:default"])},null,4),e.createElementVNode("div",s,[e.createElementVNode("div",{class:"hue-bar",ref_key:"hueBarEl",ref:w,onClick:e.withModifiers(oe,["stop"]),onMousedown:t[10]||(t[10]=e.withModifiers((e=>J(e,oe)),["stop"]))},[e.createElementVNode("div",{class:"picker",ref_key:"huePickerEl",ref:E,style:{top:"-1px"},onMousedown:t[9]||(t[9]=e.withModifiers((e=>J(e,oe)),["stop"]))},null,544)],544),e.createElementVNode("div",{class:"opacity-bar",ref_key:"opactiyBarEl",ref:x,onClick:e.withModifiers(re,["stop"]),onMousedown:t[12]||(t[12]=e.withModifiers((e=>J(e,re)),["stop"]))},[e.createElementVNode("div",{class:"picker",ref_key:"opacityPickerEl",ref:k,style:{top:"-1px"},onClick:e.withModifiers(re,["stop"]),onMousedown:t[11]||(t[11]=e.withModifiers((e=>J(e,re)),["stop"]))},null,544)],544)]),e.createElementVNode("div",c,[e.createElementVNode("div",{class:"preview-color",style:e.normalizeStyle({background:S.value})},null,4)])])],544),[[e.vShow,$.value]])]))}}),[["__scopeId","data-v-5a8a2488"]]);return d.install=function(e){e.component("ColorPicker",d)},d}));
