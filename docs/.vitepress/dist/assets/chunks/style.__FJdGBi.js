import{p as d,a1 as Pe,v as we,q as ve,P as pe,c as te,j as n,N as C,Z as v,n as D,a2 as Ce,a3 as $e,o as oe,F as Be,B as _e,t as Ie}from"./framework.HCv6KnyE.js";const y={hsb2rgb(a){var l={},i=Math.round(a.h),p=Math.round(a.s*255/100),b=Math.round(a.b*255/100);if(p==0)l.r=l.g=l.b=b;else{var f=b,h=(255-p)*b/255,k=(f-h)*(i%60)/60;i==360&&(i=0),i<60?(l.r=f,l.b=h,l.g=h+k):i<120?(l.g=f,l.b=h,l.r=f-k):i<180?(l.g=f,l.r=h,l.b=h+k):i<240?(l.b=f,l.r=h,l.g=f-k):i<300?(l.b=f,l.g=h,l.r=h+k):i<360?(l.r=f,l.g=h,l.b=f-k):(l.r=0,l.g=0,l.b=0)}return{r:Math.round(l.r),g:Math.round(l.g),b:Math.round(l.b),a:a.a}},hsba2rgba(a){const l=this.hsb2rgb(a);return`rgba(${l.r},${l.g},${l.b},${l.a})`},rgba2hex(a){const l=b=>{const f=b.toString(16);return f.length<2?"0"+f:f},i=a.a>=0?Math.round(a.a*255):0;let p="";return i!==255&&(p=l(i)),"#"+l(a.r)+l(a.g)+l(a.b)+p},hex2rgba(a){const l=a.length===9;let i=parseInt(a.slice(1,3),16),p=parseInt(a.slice(3,5),16),b=parseInt(a.slice(5,7),16),f=l?+(parseInt(a.slice(7,9),16)/255).toFixed(2):1;return{r:i,g:p,b,a:f}},hex2hsb(a){const l=this.hex2rgba(a);return l.a=1,this.rgba2hsba(l)},rgba2hsba(a){var l={h:0,s:0,b:0,a:a.a},i=Math.min(a.r,a.g,a.b),p=Math.max(a.r,a.g,a.b),b=p-i;return l.b=p,l.s=p!=0?255*b/p:0,l.s!=0?a.r==p?l.h=(a.g-a.b)/b:a.g==p?l.h=2+(a.b-a.r)/b:l.h=4+(a.r-a.g)/b:l.h=-1,l.h*=60,l.h<0&&(l.h+=360),l.s*=100/255,l.b*=100/255,l.h=Math.round(l.h),l.s=Math.round(l.s),l.b=Math.round(l.b),l}},Q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAAAM0lEQVQ4EWM8cuTIfwY8wMbGhhGPNAMTPkli5EYNYBgEgYg3jkHRSCidjEbjYIhGimMBAKIWB2rXs92IAAAAAElFTkSuQmCC",Le=(a,l)=>{const i=a.__vccOpts||a;for(const[p,b]of l)i[p]=b;return i},Se={onselectstart:"return false",style:{position:"relative"}},De=["onClick","onMousedown"],Ge={style:{"font-size":"10px",width:"32px","padding-left":"8px","user-select":"none"}},Ve={class:"palette-wrapper"},Te={class:"huebar-wrapper"},Ye={class:"bar-wrapper"},He={class:"preview-wrapper"},Ne={name:"vue-colorpicker"},Oe=Object.assign(Ne,{props:{modelValue:{type:Object},size:{type:String,required:!1,default:"medium"},modebar:{type:String,required:!1,default:"show"}},emits:["update:modelValue","colorChanged"],setup(a,{emit:l}){var i,p,b,f;const h=a,k=l,ge=o=>{k("update:modelValue",o)},ae=d(null),se=d(null),G=d(null),$=d(null),U=d(null),X=d(null),re=d(null),ne=d(null),V=d(null),ie=d(null),B=d(null),P=d(!1),m=d(0),j=d(""),T=d(""),K=d(""),ue=d(!0),s=Pe(y.rgba2hsba(((i=h.modelValue)==null?void 0:i.color)||{r:0,g:0,b:0,a:1})),M=d(((p=h.modelValue)==null?void 0:p.degree)||90);M.value=M.value<0?0:M.value;const Y=d(h.modebar);["none","show"].includes(Y.value)||(Y.value="show");const A=d(((b=h.modelValue)==null?void 0:b.mode)||"solid");["solid","linear","radial"].includes(A.value)||(A.value="solid"),Y.value=="none"&&(A.value="solid");const be=d(((f=h.modelValue)==null?void 0:f.color)||[{percent:0,color:{r:255,g:255,b:255,a:1}},{percent:100,color:{r:0,g:0,b:0,a:1}}]),g=d([]);be.value.forEach((o,e)=>{g.value.push({id:e,percent:o.percent,color:y.rgba2hsba(o.color)})});let R=!1,z=216,_=138,E=150,he=0,F=null;"EyeDropper"in window?F=new EyeDropper:(ue.value=!1,console.log("EyeDropper only supports Google Chrome version 95 and above")),we(()=>{H(A.value)}),ve(s,()=>{N(),S()}),ve(P,()=>{P.value?(document.addEventListener("click",de,!0),document.addEventListener("keyup",ce,!1)):(document.removeEventListener("click",de,!0),document.removeEventListener("keyup",ce,!1))});function H(o){if(A.value=o,A.value!=="solid"){Me(),Ee();const e=g.value[m.value].color;s.h=e.h,s.s=e.s,s.b=e.b,s.a=e.a}ee(),N(),S()}async function Ae(){if(!F)return console.log("EyeDropper only supports Chrome Version 95+"),!1;F.open().then(o=>{const e=y.hex2hsb(o.sRGBHex);s.h=e.h,s.s=e.s,s.b=e.b,s.a=e.a,ee()}).catch(o=>{console.log(o)})}function me(){return!1}function ce(o){o.keyCode==27?P.value=!1:(o.keyCode==32||o.keyCode==8)&&ke()}function I(o){let e=o.getBoundingClientRect(),t=o.ownerDocument,r=t.body,u=t.documentElement,c=u.clientTop||r.clientTop||0,w=u.clientLeft||r.clientLeft||0,le=e.top+(self.scrollY||u.scrollTop||r.scrollTop)-c,xe=e.left+(self.scrollX||u.scrollLeft||r.scrollLeft)-w;return{top:le,left:xe}}function L(){let o=0,e=0,t=window.event;return t.pageX?(o=t.pageX,e=t.pageY):(o=t.clientX+document.body.scrollLeft-document.body.clientLeft,e=t.clientY+document.body.scrollTop-document.body.clientTop),{x:o,y:e}}function de(o){var e=o.target;if(R)return R=!1,!1;!se.value.contains(e)&&!ae.value.contains(e)&&(P.value=!1)}function x(o,e,t){document.addEventListener("mousemove",r,!1),document.addEventListener("mouseup",u,!1);function r(){R=!0,e(o,t)}function u(){document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",u)}}function ye(){if(g.value.length<10){const o=JSON.parse(JSON.stringify(g.value[m.value]));o.id=he++,g.value.push(o),m.value=g.value.length-1,pe(()=>W(V.value.children[m.value],m.value))}}function ke(){g.value.length>2&&(g.value.splice(m.value,1),m.value=g.value.length-1,pe(()=>S()))}function W(o,e){const t=I(V.value),r=L();let u=Math.max(-3,Math.min(E-12,r.x-t.left-6));o.style.left=u+"px",g.value[e].percent=Math.round((u+3)/(E-9)*100),m.value=e;const c=g.value[e].color;s.h=c.h,s.s=c.s,s.b=c.b,s.a=c.a,ee(),N(),S()}function Me(){g.value.forEach((o,e)=>{V.value.children[e].style.left=Math.round((E-9)/100*o.percent-3)+"px"})}function N(){A.value!=="solid"&&(g.value[m.value].color.a=s.a,g.value[m.value].color.h=s.h,g.value[m.value].color.s=s.s,g.value[m.value].color.b=s.b)}function S(){const o=y.hsb2rgb(s);j.value=`rgba(${o.r}, ${o.g}, ${o.b}, ${o.a})`,T.value=j.value;let e="",t="",r=[...g.value],u=[];r.sort((w,le)=>w.percent-le.percent),r.forEach(w=>{e+=","+y.hsba2rgba(w.color)+" "+w.percent+"%",u.push({percent:w.percent,color:y.hsb2rgb(w.color)})});const c={};switch(c.mode=A.value,A.value){case"solid":c.color=y.hsb2rgb(s),c.hex=y.rgba2hex(c.color);break;case"linear":K.value=`linear-gradient(to right,${e.slice(1)}),url('${Q}')`,T.value=`linear-gradient(${M.value}deg${e}),url('${Q}')`,t=`background-image:linear-gradient(${M.value}deg${e})`,c.degree=M.value,c.color=u,c.css=t;break;case"radial":K.value=`linear-gradient(to right,${e.slice(1)}),url('${Q}')`,T.value=`radial-gradient(${e.slice(1)}),url('${Q}')`,t=`background-image:radial-gradient(${e.slice(1)})`,c.color=u,c.css=t;break}ge(c),k("colorChanged",c)}function q(){const t=I(ie.value),r=L(),u=Math.atan2(t.top+10-r.y,r.x-t.left-10);B.value.style.left=Math.cos(u)*10+4+1+"px",B.value.style.top=-Math.sin(u)*10+4+1+"px";let c=90-Math.floor(u*180/Math.PI);c<0&&(c+=360),M.value=c,N(),S()}function Ee(){let t=M.value;t-360<0&&(t-=360);const r=-(t-90)*(Math.PI/180);B.value.style.left=Math.cos(r)*10+4+1+"px",B.value.style.top=-Math.sin(r)*10+4+1+"px"}function J(){const o=I(G.value),e=L(),t=Math.max(-6,Math.min(e.x-o.left-6,z-6)),r=Math.max(-6,Math.min(e.y-o.top-6,_-6));$.value.style.left=t+"px",$.value.style.top=r+"px",s.s=Math.round(100*(t+6)/z),s.b=Math.round(100*(_-r-6)/_)}function Z(){const o=I(re.value),e=L(),t=Math.max(-3,Math.min(e.x-o.left-6,E-12));U.value.style.left=t+"px",s.h=Math.round(360*(t+3)/(E-9));const r=y.hsb2rgb({h:s.h,s:100,b:100,a:s.a});G.value.style.background=`rgb(${r.r},${r.g},${r.b},1)`}function O(){const o=I(ne.value),e=L(),t=Math.max(-3,Math.min(E-12,e.x-o.left-6));X.value.style.left=t+"px",s.a=((t+3)/(E-9)).toFixed(2)}function ee(){const o=y.hsb2rgb({h:s.h,s:100,b:100,a:s.a});G.value.style.background=`rgb(${o.r},${o.g},${o.b},1)`,$.value.style.left=z/100*s.s-6+"px",$.value.style.top=_-_/100*s.b-6+"px",U.value.style.left=(E-9)/360*s.h-3+"px",X.value.style.left=(E-9)*s.a-3+"px"}return(o,e)=>(oe(),te("div",Se,[n("div",{class:D(["cbtn",[h.size,{active:P.value}]]),onClick:e[0]||(e[0]=v(t=>P.value=!P.value,["stop"])),ref_key:"cbtnEl",ref:ae},[n("div",{class:"cbtn-inner",style:C({background:T.value})},null,4)],2),Ce(n("div",{class:"panel",ref_key:"panelEl",ref:se,onContextmenu:v(me,["prevent"])},[n("div",{class:"active-mode-wrapper",style:C({display:Y.value})},[n("div",{title:"solid",class:D(["btn-active-mode solid",{gray:A.value==="solid"}]),onClick:e[1]||(e[1]=v(t=>H("solid"),["stop"]))},null,2),n("div",{title:"linear",class:D(["btn-active-mode linear",{gray:A.value==="linear"}]),onClick:e[2]||(e[2]=v(t=>H("linear"),["stop"]))},null,2),n("div",{title:"radial",class:D(["btn-active-mode radial",{gray:A.value==="radial"}]),onClick:e[3]||(e[3]=v(t=>H("radial"),["stop"]))},null,2)],4),n("div",{class:"grad-wrapper",style:C(A.value==="solid"?"display:none":"")},[n("div",{class:"grad-bar",ref_key:"gradBarEl",ref:V,style:C({backgroundImage:K.value}),onClick:e[4]||(e[4]=v(t=>ye(),["stop"]))},[(oe(!0),te(Be,null,_e(g.value,(t,r)=>(oe(),te("div",{key:t.id,style:{top:"-1px"},class:D(["picker",r==m.value?"on":""]),onClick:v(u=>W(u.target,r),["stop"]),onMousedown:v(u=>x(u.target,W,r),["stop"])},null,42,De))),128))],4),n("div",{class:"flex-row",style:C(A.value==="linear"?"":"visibility:hidden")},[n("div",{class:"degree",ref_key:"degreeEl",ref:ie,onClick:v(q,["stop"]),onMousedown:e[6]||(e[6]=v(t=>x(t,q),["stop"]))},[n("div",{class:"picker-deg",ref_key:"degreePickerEl",ref:B,onMousedown:e[5]||(e[5]=v(t=>x(t,q),["stop"]))},null,544)],544),n("div",Ge,Ie(M.value)+"Â°",1)],4)],4),n("div",Ve,[n("div",{class:"palette",ref_key:"paletteEl",ref:G,onClick:v(J,["stop"]),onMousedown:e[8]||(e[8]=v(t=>x(t,J),["stop"]))},[e[13]||(e[13]=n("div",{class:"white"},null,-1)),e[14]||(e[14]=n("div",{class:"black"},null,-1)),n("div",{class:"picker",ref_key:"palettePickerEl",ref:$,onMousedown:e[7]||(e[7]=v(t=>x(t,J),["stop"]))},null,544)],544)]),n("div",Te,[n("div",{class:"dropper",onClick:Ae,style:C([{cursor:"pointer"},ue.value?"":"opacity: 50%;cursor:default"])},null,4),n("div",Ye,[n("div",{class:"hue-bar",ref_key:"hueBarEl",ref:re,onClick:v(Z,["stop"]),onMousedown:e[10]||(e[10]=v(t=>x(t,Z),["stop"]))},[n("div",{class:"picker",ref_key:"huePickerEl",ref:U,style:{top:"-1px"},onMousedown:e[9]||(e[9]=v(t=>x(t,Z),["stop"]))},null,544)],544),n("div",{class:"opacity-bar",ref_key:"opactiyBarEl",ref:ne,onClick:v(O,["stop"]),onMousedown:e[12]||(e[12]=v(t=>x(t,O),["stop"]))},[n("div",{class:"picker",ref_key:"opacityPickerEl",ref:X,style:{top:"-1px"},onClick:v(O,["stop"]),onMousedown:e[11]||(e[11]=v(t=>x(t,O),["stop"]))},null,544)],544)]),n("div",He,[n("div",{class:"preview-color",style:C({background:j.value})},null,4)])])],544),[[$e,P.value]])]))}}),fe=Le(Oe,[["__scopeId","data-v-5a8a2488"]]);fe.install=function(a){a.component("ColorPicker",fe)};export{fe as C};
